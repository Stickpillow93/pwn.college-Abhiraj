
# `ps` command 

The ps command can be the process status command and it is used to list all of the running processors in the terminal

There are two ways to use the ps command

1. Standard Syntax:- in this syntax, you can use `-e` to list "every" process and `-f` for a "full format" output, including arguments. These can be combined into a single argument `-ef`.
2. BSD syntax:-in this syntax, you can use `a` to list processes for all users, `x` to list processes that aren't running in a terminal, and `u` for a "user-readable" output. These can be combined into a single argument `aux`.

Example:-

`ps ef`
```
UID   PID  PPID  C STIME TTY   TIME CMD
hacker 1    0     0 05:34 ?     0:00 /sbin/docker-init -- /bin/sleep 6h
```

`ps aux`
```
USER   PID %CPU %MEM VSZ  RSS TTY STAT START TIME COMMAND
hacker 1   0.0  0.0  1128 4   ?   Ss    05:34 0:00 /sbin/docker-init -- /bin/sleep 6h
```

The difference is that `ps -ef` shows the parents process id as well meanwhile the `ps aux` shows the cpu and memory usage. 

We use `ps -ef` when we want to see the parent-child relationships between processes. 

We use `ps aux `when we want to see the resource usage. 

# `kill` command

The syntax of the kill command is `kill <pid>`

It is used to stop any process we don't want to run. 

# Suspending processes

ctrl c is used when we want to kill a process entirely 

ctrl z is used when we want to pause a process and resume it later

if we want to resume the suspended process we use fg command

If we want to resume the command in the background we use bg command

# Backgrounding processes

We append the `&` operator at the end of a command to instantly make it run in the background.

# Exit code

In the terminal the exit code of the just run command is stored in the variable `?` which we can access using $?


# Challenges

## 1. Listing processes

Anyways! Let's practice. In this level, I have once again renamed `/challenge/run` to a random filename, and this time made it so that you cannot `ls` the `/challenge` directory! But I also launched it, so you can find it in the running process list, figure out the filename, and relaunch it directly for the flag! Good luck!

```bash
ps -ef
```

Output 1:-
```
UID          PID    PPID  C STIME TTY          TIME CMD
root           1       0  0 08:17 ?        00:00:00 /sbin/docker-init -- /nix/var/nix/profiles/dojo-workspace/bin/dojo-
root           7       1  0 08:17 ?        00:00:00 /run/dojo/bin/sleep 6h
root         132       1  0 08:17 ?        00:00:00 /challenge/18462-run-16749
root         135     132  0 08:17 ?        00:00:00 sleep 6h
hacker       137       0  0 08:17 pts/0    00:00:00 /nix/store/0nxvi9r5ymdlr2p24rjj9qzyms72zld1-bash-interactive-5.2p37
hacker       143     137  0 08:17 pts/0    00:00:00 /run/dojo/bin/bash --login
hacker       161       1  0 08:17 ?        00:00:00 /nix/store/g0q8n7xfjp7znj41hcgrq893a9m0i474-ttyd-1.7.7/bin/ttyd --p
hacker       166     161  0 08:17 pts/1    00:00:00 /run/dojo/bin/bash --login
hacker       179     143  0 08:17 pts/0    00:00:00 ps -ef
```

```bash
/challenge/18462-run-16749
```

Output flag:- pwn.college{gS0BuzfYZ7_mZBvkLWLWgSn32Z6.QX4MDO0wCM2YTMzEzW}

## 2. Killing Processes

Now, it's time to terminate your first process! In this challenge, `/challenge/run` will refuse to run while `/challenge/dont_run` is running! You must find the `dont_run` process and `kill` it.

```bash
ps -ef | grep dont_run
```

Output 1:
```
hacker       136     135  0 08:23 ?        00:00:00 /challenge/dont_run
hacker       198     158  0 08:26 pts/0    00:00:00 grep --color=auto dont_run
```

```bash
kill 136
/challenge/run
```

Output flag:-pwn.college{8t8eK-Ye9JebEwew4DqIni24DPc.QXyQDO0wCM2YTMzEzW}

## 3. Interrupting Processes

Try it here! `/challenge/run` will refuse to give you the flag until you interrupt it

```bash
/challenge/run #after running this we press ctrl+c
```

Output flag:-pwn.college{ANnVnNFqbKAO0g7cYz2Naz80JMn.QXzQDO0wCM2YTMzEzW}

## 4. Killing misbehaving processes

1. Check what processes are running.
2. Find `/challenge/decoy` in the list and figure out its process ID.
3. `kill` it.
4. Run `/challenge/run` to get the flag without being overwhelmed by decoys (you don't need to redirect its output; it'll write to the FIFO on its own).

```bash
ps -ef # after running this we see the process ID is 142 
kill 142
/challenge/run 
cat /tmp/flag_fifo # if initially there are too many flags run the last two command again. 
```

Output flag:-pwn.college{4NMw6VCMK65qa0Y3T9thpIGETLI.0FNzMDOxwCM2YTMzEzW}

## 5. Suspending processes

This level's `run` wants to see another copy of itself running _and using the same terminal_. How? Use the terminal to launch it, then suspend it, then launch another copy while the first is suspended!

```bash
/challenge/run # press ctrl z
/challenge/run 
```

Output flag:-pwn.college{YFExPNqMQp_VFLrmgd4rnlOVoVJ.QX1QDO0wCM2YTMzEzW}

## 6. Resuming processes

Go try it out! This challenge's `run` needs you to suspend it, then resume it

```bash
/challenge/run # press ctrl z
fg
```

Output flag:-pwn.college{MB23Y3OF_btXBNjQYSqWAfevniq.QX2QDO0wCM2YTMzEzW}

## 7. Backgrounding processes

This level's `run` wants to see another copy of itself running, _not suspended_, and using the same terminal. How? Use the terminal to launch it, then suspend it, then _background_ it with `bg` and launch another copy while the first is running in the background!

```bash
/challenge/run # press ctrl z
bg
/challenge/run
```

Output flag:-pwn.college{Qoz5O947Cvm-pxxw8UVwqYmLgQj.QX3QDO0wCM2YTMzEzW}

## 8. Foregrounding processes

Imagine that you have a backgrounded process, and you want to mess with it some more. What do you do? Well, you can foreground a backgrounded process with `fg` just like you foreground a suspended process!

```bash
/challenge/run #ctrl z
bg
fg
```

Output flag:-pwn.college{QQefR8qu_OYvAUyJlp96UJOUE9j.QX4QDO0wCM2YTMzEzW}

## 9. Starting background processes

Now it's your turn to practice! Launch `/challenge/run` backgrounded for the flag!

```bash
/challenge/run &
```

Output flag:-pwn.college{cRFXvthr9lJxumlp-Ai8fB0jaHj.QX5QDO0wCM2YTMzEzW}


## 10. Exit code

In this challenge, you must retrieve the exit code returned by `/challenge/get-code` and then run `/challenge/submit-code` with that error code as an argument.

```bash
/challenge/get-code
/challenge/submit-code $?
```

Output flag:-pwn.college{wa0WSgBZprtZ67i9trB_O-15cWv.QX5YDO1wCM2YTMzEzW}
