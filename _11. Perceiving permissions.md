
# File Ownership:-

Every file in Linux belongs to a user. One a system that has multiple users other users will have access to different files. However the root user will have access and ownership to all of the files 

The file ownership can also be broken down into a collection of users known as a group.

To check the file ownership we can use the `ls -l` command
The output of the above command is in the format 
`-rwxrwxrwx`
1. First character is for whether directory or not `-` for file and `d` for directory
2. positions 2-4 give user permissions
3. positions 5-7 give group permission 
4. positions 8-10 give other permissions

### Permission Types

- `r` → read (view file or list directory)  
- `w` → write (edit file or add/remove files in directory) 
- `x` → execute (run file or enter directory)
- `-` → no permission

### SUID (set user id)

This is a special permission that allows files to be run just as their owner every time they are executed. 

Example:-
```bash
-rw-r--r-- 1 hacker hacker 0 May 22 13:42 college_file
```

`hacker` user has permission to read and write but not execute
`hacker` group has permission to read only 
same with other

These permission can be changed with the `chmod` command

# `chown` command

The `chown` command is used to change the ownership of file

```bash
chown [username] [file]
```


# `id` command

This command is used to find the groups a particular user is part of


# `chgrp` command

It is used to change the ownership group of a file. 
```bash
chgrp [groupname] file.txt
```
The above command changes the ownership group of file.txt to the group 


# `chmod` command

Chmod is used to change the permission to use a file

```bash
chmod [OPTIONS] MODE FILE
```

### Mode

The way to right the mode is Who+/-What
- `WHO`: `u` (user), `g` (group), `o` (others), `a` (all)
- `WHAT`: `r`, `w`, `x`

We can also set the permission we want with g=rw

`chmod a=r,u=rw /challenge/pwn`

# Challenges

## 1. Changing file ownership

In this level, we will practice changing the owner of the `/flag` file to the `hacker` user, and then read the flag. For this challenge only, I made it so that you can use chown to your heart's content as the `hacker` user (again, typically, this requires you to be `root`)

```bash
chown hacker /flag
cat /flag
```

Output flag:-pwn.college{IWd2rGqkYOrSFPf4M2KMSQ5KT3b.QXxEjN0wCM2YTMzEzW}

## 2. Groups and files

In this level, I have made the flag readable by whatever group owns it, but this group is currently `root`. Luckily, I have also made it possible for you to invoke `chgrp` as the `hacker` user! Change the group ownership of the flag file, and read the flag!

```bash
chgrp hacker /flag
cat /flag
```

Output flag:- pwn.college{4A0xSWhHQKrjwEh_iNJIj-cV4ys.QXxcjM1wCM2YTMzEzW}

# 3. Fun with group names

 have randomized the name of the group that your user is in. You will need to use the `id` command to figure that name out, then `chgrp` to victory!
 
```bash
id # after running id command we will see the grp
chgrp grp12900 /flag
cat /flag
```

Output flag:-pwn.college{Yj7vUmWE9RNtPVwAN3zswmxgQ_g.QXycjM1wCM2YTMzEzW}

# 4. Changing Permissions

In this challenge, you must change the permissions of the `/flag` file to read it! Typically, you need to have write access to the file in order to change its permissions, but I have made the `chmod` command all-powerful for this level, and you can `chmod` anything you want even though you are the `hacker` user.

```bash
chmod a+r /flag
cat /flag
```

Output flag:-pwn.college{w6uuVM9Rs6NO7c0b9yLD2AZLjwc.QXzcjM1wCM2YTMzEzW}

## 5. Executable Files

In this challenge, the `/challenge/run` program will give you the flag, but you must first make it executable! Remember your `chmod`, and get `/challenge/run` to tell you the flag!

```bash
chmod a+x /challenge/run
/challenge/run
```

Output flag:-pwn.college{YL8nzRTrkGU6Q7ywB2HdvxTLeCr.QXyEjN0wCM2YTMzEzW}

## 6. Permission tweaking practice

This challenge will ask you to change the permissions of the `/challenge/pwn` file in specific ways a few times in a row. If you get the permissions wrong, the game will reset and you can try again. If you get the permissions right eight times in a row, the challenge will let you `chmod` `/flag` to make it readable for yourself :-) Launch `/challenge/run` to get started!

```bash
/challenge/run
chmod u-r /challenge/pwn
chmod g-r /challenge/pwn
chmod g+wr /challenge/pwn
chmod a-wr /challenge/pwn
chmod a+wr /challenge/pwn
chmod uo-r /challenge/pwn
chmod u+r /challenge/pwn
chmod a-w /challenge/pwn
chmod u+r /flag
cat /flag
```

Output flag:-pwn.college{k6bAYFDL2eYJcllzl-ZGr8jh_9U.QXwEjN0wCM2YTMzEzW}

## 8. Permission setting practice

Same as previous

```bash
/challenge/run
chmod u-w /challenge/pwn
chmod u=rx,g=rw,o=rx /challenge/pwn
chmod u=rw,g=x,o=r /challenge/pwn
chmod u=x,g=rwx,o=- /challenge/pwn
chmod u=rw,g=r,o=wx /challenge/pwn
chmod u=rwx,g=-,o=r /challenge/pwn
chmod u=-,g=wx,o=w /challenge/pwn
chmod u=wx,g=wx,o=rw /challenge/pwn
chmod u+r /flag
cat /flag
```

Output practice:-pwn.college{07JEC-iFTQBWjSbsDnRnj3lmZNH.QXzETO0wCM2YTMzEzW}

## 9. The SUID bit

Now, we are going to let you add the SUID bit to the `/challenge/getroot` program in order to spawn a `root` shell for you to `cat` the flag yourself!

```bash
chmod u+s /challenge/getroot
/challenge/getroot #this will launch a sessiona as root
cat /flag
```

Output flag:-pwn.college{QXBdOpOCUN1BmQV0clFNqfC20tb.QXzEjN0wCM2YTMzEzW}
